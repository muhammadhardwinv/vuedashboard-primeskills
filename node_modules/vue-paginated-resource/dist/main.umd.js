var B=Object.defineProperty;var y=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var A=(t,e,a)=>e in t?B(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,d=(t,e)=>{for(var a in e||(e={}))I.call(e,a)&&A(t,a,e[a]);if(y)for(var a of y(e))M.call(e,a)&&A(t,a,e[a]);return t};(function(t,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t["vue-paginated-resource"]={},t.Vue))})(this,function(t,e){"use strict";const a=n=>Object.keys(n),b=(n,s)=>e.watch(a(n).map(v=>()=>n[v]),s),K=n=>{var g,p,h,_,P;const s=n.frontend.pageSize,v=(g=n.backend)==null?void 0:g.pageSize,q=((h=(p=n.backend)==null?void 0:p.requestKeys)==null?void 0:h.page)||"page",m=(P=(_=n.backend)==null?void 0:_.requestKeys)==null?void 0:P.pageSize;return(T,o,k,R)=>{const l=e.shallowRef([]),c=e.ref(!1),u=e.ref(0),i=e.ref(0),f=e.computed(()=>s*(o.value-1)),r=e.computed(()=>s*o.value),N=e.computed(()=>l.value.length-r.value),w=e.computed(()=>o.value>1),x=e.computed(()=>(!c.value||r.value<l.value.length)&&r.value<u.value),C=e.computed(()=>({firstElement:f.value,lastElement:Math.min(f.value+s-1,u.value-1)})),D=e.computed(()=>l.value.slice(f.value,r.value)),E=async()=>{c.value=!0,i.value+=1;const G=d({[q]:i.value},m!==void 0&&{[m]:v}),j=d(d({},G),R),{total:z,elements:S}=await T(j);u.value=z,S.length>0?l.value=[...l.value,...S]:i.value-=1,c.value=!1};return b(R,()=>{l.value=[],i.value=0,k(),E()}),e.watch(()=>o.value,()=>{l.value.length>0&&N.value<2*s&&l.value.length<u.value&&E()}),E(),{total:u,pageElements:D,loading:c,previousPageAvailable:w,nextPageAvailable:x,pageLimits:C}}};t.createPaginatedResourceComposable=K,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=main.umd.js.map

/******/ (function() { // webpackBootstrap
/******/ 	"use strict";
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	!function() {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = function(exports) {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	!function() {
/******/ 		__webpack_require__.p = "";
/******/ 	}();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "ScrollContainer": function() { return /* reexport */ ScrollContainer; },
  "useMultiPagination": function() { return /* reexport */ useMultiPagination; },
  "usePagination": function() { return /* reexport */ usePagination; }
});

;// CONCATENATED MODULE: ./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js
/* eslint-disable no-var */
// This file is imported into lib/wc client bundles.

if (typeof window !== 'undefined') {
  var currentScript = window.document.currentScript
  if (false) { var getCurrentScript; }

  var src = currentScript && currentScript.src.match(/(.+\/)[^/]+\.js(\?.*)?$/)
  if (src) {
    __webpack_require__.p = src[1] // eslint-disable-line
  }
}

// Indicate to webpack that this file can be concatenated
/* harmony default export */ var setPublicPath = (null);

;// CONCATENATED MODULE: external {"commonjs":"vue","commonjs2":"vue","root":"Vue"}
var external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject = require("vue");
;// CONCATENATED MODULE: ./src/lib/pagination.ts

function usePagination(options) {
  const data = (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.reactive)({
    page: 1,
    loading: false,
    hasMore: true,
    loadData: options.loadData
  });
  const canTrigger = (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.computed)(() => {
    return data.hasMore && !data.loading;
  });
  async function loadMore() {
    if (!canTrigger.value) return false;
    data.loading = true;
    try {
      const hasMore = await data.loadData(data.page, options.payload);
      if (hasMore) {
        data.page++;
      } else {
        data.hasMore = false;
      }
    } catch (e) {
      console.warn(e);
      data.hasMore = false;
    }
    data.loading = false;
    return data.hasMore;
  }
  return {
    ...(0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.toRefs)(data),
    loadMore
  };
}
function useMultiPagination(options) {
  const paginations = new Map();
  return payload => {
    const key = options.keyExtractor(payload);
    if (!paginations.has(key)) {
      paginations.set(key, usePagination({
        ...options,
        payload
      }));
    }
    return paginations.get(key);
  };
}
;// CONCATENATED MODULE: ./node_modules/thread-loader/dist/cjs.js!./node_modules/babel-loader/lib/index.js!./node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/lib/ScrollContainer.vue?vue&type=script&lang=ts&setup=true



/* harmony default export */ var ScrollContainervue_type_script_lang_ts_setup_true = (/*#__PURE__*/(0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.defineComponent)({
  __name: 'ScrollContainer',
  props: {
    triggerLoad: {
      required: true,
      type: Function
    },
    reverse: {
      type: Boolean,
      default: false
    },
    threshold: {
      default: 100,
      type: Number
    }
  },
  setup(__props) {
    const props = __props;
    const container = (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.ref)(null);
    function hasReachedEnd(element) {
      if (props.reverse) {
        return element.scrollHeight - element.clientHeight + element.scrollTop <= props.threshold;
      } else {
        return element.scrollHeight - element.clientHeight - element.scrollTop <= props.threshold;
      }
    }
    (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.onMounted)(() => {
      if (!container.value) {
        return;
      }
      const div = container.value;
      function parentFilled() {
        if (div) {
          return div.scrollHeight - props.threshold >= (div.parentElement?.clientHeight ?? 0);
        } else {
          return false;
        }
      }
      function prefilled() {
        if (div) {
          return div.children.length > 0;
        }
        return false;
      }
      async function autoLoadToFitContent() {
        async function load() {
          const hasMore = await props.triggerLoad();
          if (hasMore) {
            await (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.nextTick)();
            console.log(parentFilled());
            if (!parentFilled()) await load();
          }
        }
        // We load contents if it's empty container or has items and items doesn't fit parent
        if (!prefilled() || prefilled() && !parentFilled()) await load();
      }
      autoLoadToFitContent();
      div.addEventListener('scroll', e => {
        const element = e.target;
        console.log('Here');
        if (hasReachedEnd(element)) {
          props.triggerLoad();
        }
      });
    });
    return (_ctx, _cache) => {
      return (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.openBlock)(), (0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.createElementBlock)("div", {
        ref_key: "container",
        ref: container,
        style: {
          "overflow": "auto",
          "height": "100%"
        }
      }, [(0,external_commonjs_vue_commonjs2_vue_root_Vue_namespaceObject.renderSlot)(_ctx.$slots, "default")], 512);
    };
  }
}));
;// CONCATENATED MODULE: ./src/lib/ScrollContainer.vue?vue&type=script&lang=ts&setup=true
 
;// CONCATENATED MODULE: ./src/lib/ScrollContainer.vue



const __exports__ = ScrollContainervue_type_script_lang_ts_setup_true;

/* harmony default export */ var ScrollContainer = (__exports__);
;// CONCATENATED MODULE: ./src/lib/index.ts



;// CONCATENATED MODULE: ./node_modules/@vue/cli-service/lib/commands/build/entry-lib-no-default.js



module.exports = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=VuePagination.common.js.map